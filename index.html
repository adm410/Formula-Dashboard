<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.8.9/brython.min.js"></script>
</head>

<body onload="brython()">
  <script type="text/python">
    from browser import document
    import fastf1
    import datetime

    def nextRace(seasonYear):
      while True:
        try:
          remaining_events = fastf1.get_events_remaining()
          raceRound = remaining_events.iloc[0, 0]

          event = fastf1.get_event(seasonYear, raceRound)

          # Create a div to display race details
          race_details_div = document.createElement("div")

          # Add race details to the div
          race_details_div.textContent = f'Round: {raceRound}\n'
          race_details_div.textContent += f'{event.EventName}\n\n'
          for i in range(1, 6):
            session_name = event.get_session_name(i)
            session_date_utc = getattr(event, f'Session{i}DateUtc')
            race_details_div.textContent += f'{session_name}: {session_date_utc}\n'

          race_details_div.textContent += f'\n{event.Location}, {event.Country}'

          # Append the div to the document body
          document.body.appendChild(race_details_div)
          return
        except ValueError:
          seasonYear -= 1

    # Get the current year
    seasonYear = datetime.date.today().year

    # Call the nextRace function to display race details
    nextRace(seasonYear)
  </script>
</body>

</html>